{% extends "base.html" %}

{% block title %}Virtual Fitting - vFit{% endblock %}

{% block content %}
<div class="container text-center mt-5">
    <h1 class="mb-4">Virtual Fitting</h1>

    <!-- 아바타 미리보기 큰 빈 칸 -->
    <div id="avatar-preview-container" class="mb-4 d-flex justify-content-center">
        <div id="avatar-preview" 
            data-model-path="{{ url_for('static', filename='models/realistic-female/source/modified_model.glb') }}"     
            data-url-params="{{ request.query_string.decode('utf-8') }}" 
            style="width: 600px; height: 600px; background-color: #e0e0e0;">
            <p>Loading 3D Model...</p>
        </div>
    </div>

    <!-- 선택된 체형과 키, 몸무게를 표시하는 영역 -->
    <div id="avatar-info" class="mt-3">
        <p><strong>Body Shape:</strong> {{ request.args.get('body_shape') }}</p>
        <p><strong>Height:</strong> {{ request.args.get('height') }} cm</p>
        <p><strong>Weight:</strong> {{ request.args.get('weight') }} kg</p>
    </div>

    <!-- 옷 입히기/벗기기 버튼들 -->
    <div id="avatar-clothes-preview" class="mb-4">
        <div class="row">
            <div class="col-md-3 mb-3">
                <button id="show-shirt" class="btn btn-primary w-100">셔츠 입기/벗기</button>
            </div>
            <div class="col-md-3 mb-3">
                <button id="show-pants" class="btn btn-primary w-100">바지 입기/벗기</button>
            </div>
            <div class="col-md-3 mb-3">
                <button id="show-underwear" class="btn btn-primary w-100">속옷 입기/벗기</button>
            </div>
            <div class="col-md-3 mb-3">
                <button id="show-other" class="btn btn-primary w-100">신발 신기/벗기</button>
            </div>
        </div>
    </div>

    <!-- 옷 색상 변경 -->
    <div id="avatar-clothes-color" class="mb-4">
        <div class="row">
            <div class="col-md-3 mb-3">
                <label for="shirt-color" class="form-label">셔츠 색 변경:</label>
                <input type="color" id="shirt-color" name="shirt-color" class="form-control form-control-color" value="#ff0000">
            </div>
            <div class="col-md-3 mb-3">
                <label for="pants-color" class="form-label">바지 색 변경:</label>
                <input type="color" id="pants-color" name="pants-color" class="form-control form-control-color" value="#00ff00">
            </div>
            <div class="col-md-3 mb-3">
                <label for="underwear-color" class="form-label">속옷 색 변경:</label>
                <input type="color" id="underwear-color" name="underwear-color" class="form-control form-control-color" value="#0000ff">
            </div>
            <div class="col-md-3 mb-3">
                <label for="other-color" class="form-label">신발 색 변경:</label>
                <input type="color" id="other-color" name="other-color" class="form-control form-control-color" value="#ffff00">
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three/examples/js/controls/OrbitControls.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three/examples/js/loaders/GLTFLoader.js"></script>
<script src="{{ url_for('static', filename='js/virtual_fitting.js') }}"></script>
{% endblock %}
